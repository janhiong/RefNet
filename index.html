<!DOCTYPE html>
<html>
  <head>
    <title> Home </title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Oxanium:wght@200..800&family=Poiret+One&family=Quantico:ital,wght@0,400;0,700;1,400;1,700&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <script src="script.js" defer></script>
  </head>
  <body class="index-body">

    <!-- PDF -->
    <div>
      <input class="upload-button" type="file" id="resume" accept=".pdf">
      <button class ="upload-button" type="button" id="btnUpload"> Upload Resume </button>
    </div>
    
    <textarea style="width: 300px; height: 150px" id="resultText" placeholder="PDF Text appears here"></textarea>

    <script>
      const inpFile = document.getElementById("resume");
      const btnUpload = document.getElementById("btnUpload");
      const resultText  = document.getElementById("resultText");
      const keyWords = ["name","skills","experience","education"];
      const isValidResume = false;

      btnUpload.addEventListener("click", () => {
        const formData = new FormData();

        formData.append("pdfFile", inpFile.files[0]);

        fetch("/extract-text",{
          method: "post",
          body: formData
        }).then(response =>  {
          return response.text();
        }).then(extractedText =>{
          resultText.value = extractedText.toLowerCase();
          if (keyWords.every(str => resultText.value.includes(str))) {
            console.log("Good resume.");
          }
          else {
            alert("Your resume is missing one of the following sections: Name, Skills, Experience, Education");
          }
        })
      })
      
    </script>
  </body>
</html>
